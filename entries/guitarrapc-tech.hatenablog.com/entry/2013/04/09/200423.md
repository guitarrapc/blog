---
Title: PowerShellで正規表現を使って余計な0を取り除く
Category:
- PowerShell
Date: 2013-04-09T20:04:23+09:00
URL: https://tech.guitarrapc.com/entry/2013/04/09/200423
EditURL: https://blog.hatena.ne.jp/guitarrapc_tech/guitarrapc-tech.hatenablog.com/atom/entry/6802418398340681541
---

<!--
Date: 2013-04-09T20:04:23+09:00
URL: https://tech.guitarrapc.com/entry/2013/04/09/200423
-->

正規表現は偉大ですね。 likeよりmatchが好きなPowerShellerです。 さて、今更ですがIPv4は4オクテットに分けられた文字列ですね。
このIPアドレス、時に頭に0が付いた変なアドレスを渡されることがごくまれにあります。例えばこう。

```
0192.010.000.105
```

今回は、この頭の0を取り除く方法を正規表現でやってみましょう。

```
192.10.0.105
```

## ワンライナーで-replaceメソッドを利用する

PowerShellには、Stringに対する.replace() (*like処理)と -replace (*match処理) があるのは度々紹介してきたとおりです。 今回は正規表現で処理するので -replaceを利用します。

```ps1
"0192.010.000.105" -replace '\b0+\B'
```

実行結果はこうです。

```ps1
192.10.0.105
```

それぞれ何をしているか分解してみましょう。

### \b

`\b`は、文字列の先頭or末尾にマッチします。 つまり次の判定がかかります。

```ps1
PS> 0123 -replace "\b0"
123
```

しかし、これは判定がかかりません。

```ps1
PS> 1023 -replace "\b0"
1023
```

### 0+

`+`は、直前にある部分正規表現の1回以上の繰り返しにマッチします。 つまり0がある場合にマッチとなります。よってこのように0がなくなります。

```ps1
PS> '0102' -replace '0+'
12
```

`\b`と組み合わせることで頭の0のみに判定をかけるようになります。

```ps1
PS> '0102' -replace '\b0+'
102
```

### \B

`\b`が文字の戦闘は末尾に対して、`\B`は単語の戦闘及び末尾以外にマッチします。つまりこうです。

```ps1
PS> '0102' -replace '0+\B'
12
```

```ps1
PS> '0102' -replace '0\B'
12
```

```ps1
PS> '0102' -replace '\B0+'
012
```

## まとめ

正規表現は奥が深い。

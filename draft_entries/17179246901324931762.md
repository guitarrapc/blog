---
Title: Youtubeアクセスをブロックする
Category:
- Network
- Ubiquiti
Date: 2025-11-24T23:50:00+09:00
EditURL: https://blog.hatena.ne.jp/guitarrapc_tech/guitarrapc-tech.hatenablog.com/atom/entry/17179246901324931762
PreviewURL: https://tech.guitarrapc.com/draft/entry/5xUmtvxuWVFQcaTCgkdxE9W5IZo
CustomPath: 2025/11/24/235000
Draft: true
---

YouTubeへのアクセスをブロックするにはいくつかの方法があります。例えばプロキシサーバーを利用したり、ファイアウォールでやるなどといった古来から使われる方法も古くから使われています。
今回は、UniFi OSを使える環境においてYouTubeへのアクセスをブロックする方法のメモです。

[:contents]

## はじめに

本来どこかのサイトへのアクセスをブロックするのはやりたくないものです。ただ、いろいろな理由でネットワーク配下の端末から特定サイトへのアクセスを制限したいこともあるでしょう。
現在のネットワークにおいては、ゲートウェイであるルーターでアクセス制御する以外にも、エンドポイントである端末側で制御する方法もありますし、あるいはネットワーク自体をゼロトラスト化してそのポリシーで制御する方法もあります。そういう意味では、プロキシやファイアウォールを直接扱うことは少なくなってきており、個人的にも避けたいものがあります。

YouTubeへのアクセスをブロックするといっても、なるべく省力化しつつ効果的に行いたいものです。このため、今回はUniFi OSが提供している方法を3つメモです。

## ブロック方法一覧

コンテンツフィルターとポリシーテーブルでは、アクセスをブロックする対象や粒度が異なります。以下にそれぞれの特徴をまとめます。

| 方法 | アクセス制御方法 | 影響単位 | メリット | デメリット |
| --- | --- | --- | --- | --- |
| コンテンツフィルター | ドメインベース | ネットワーク単位 | 細かくドメインを選んで制御できる | YouTube公式ではドメインリスト的な案内はない & YouTubeがホストを追加したら追随が必要 |
| ポリシーテーブル | DNS(CNAME)ベース | ネットワーク単位 | YouTubeが一覧を提供している、端末単位でポリシーが設定できる | CNAMEの変更に追随が必要 |
| トラフィックルール | ドメインベース | ネットワーク単位、個別デバイス単位 | 細かくドメインを選んで制御できる、スケジュール設定が可能 |  YouTube公式ではドメインリスト的な案内はない & YouTubeがホストを追加したら追随が必要 |

SSHでUniFi OSにログインして、いろいろいじることは除外します。あくまで公式UIでできることに限定します。

## コンテンツフィルター

コンテンツフィルターでYouTubeアクセスをブロックしてみましょう。

UniFi OSの管理画面から、`Settings > CyberSecure`を開き、Content Filterタブでネットワークを選択して`Blocklist`にYouTubeのドメインを追加します。

![alt text](image-8.png)<!-- image-8.png -->

追加するドメインは以下の通りです。StackoverflowやRedditなどで紹介されているものを参考にしています。

```
youtube.com
www.youtube.com
m.youtube.com
ytimg.com
s.ytimg.com
ytimg.l.google.com
youtube.l.google.com
i.google.com
googlevideo.com
youtu.be
yt.be
```

Add Multipleから追加しても良いですし、1つずつ追加しても構いません。追加後は保存しましょう。

Add Multiple Domains

![alt text](image-1.png)<!-- image-1.png -->

![alt text](image-2.png)<!-- image-2.png -->

これで、YouTubeへのアクセスがWeb/スマホともにブロックされます。

[画像]

## ポリシーテーブル

ポリシーテーブルでYouTubeアクセスをブロックしてみましょう。

YouTubeが公式に提供している[Control YouTube content available to users](https://support.google.com/a/answer/6214622?hl=en#zippy=%2Coption-dns)に沿って、DNSベースでCNAMEを調整してアクセスをブロックする方法です。

YouTubeが提供しているCNAMEリストは以下の通りです。

```
www.youtube.com
m.youtube.com
youtubei.googleapis.com
youtube.googleapis.com
www.youtube-nocookie.com
```

これらを、制限アクセスの度合に応じて以下のいずれかにCNAMEを向けます。

```
# 厳しい制限付きモード
restrict.youtube.com
# 中程度の制限付きモード
restrictmoderate.youtube.com
```

UniFi OSの管理画面から、`Settings > Policy Engine`の一番左にあるアイコン`Policy Table`を開き、`Create New Policy`からドメインレコードを追加します。Alias Recordを選択し、上記のCNAMEリストを1つずつ追加していきます。Target Aliasには`restrict.youtube.com`を指定してアクセスブロックとしましょう。

![alt text](image-10.png)<!-- image-10.png -->

![alt text](image-3.png)<!-- image-3.png -->

一通り追加したら完了です。

![alt text](image-4.png)<!-- image-4.png -->

`dig`コマンドで確認すると、以下のようにCNAMEが向いていることがわかります。

```sh
$ dig -t CNAME www.youtube-nocookie.com
www.youtube-nocookie.com. 5     IN      CNAME   restrict.youtube.com.
```

これで、YouTubeへのアクセスがWeb/スマホともにブロックされます。

![alt text](image-6.png)<!-- image-6.png -->

## トラフィックルール

トラフィックルールでYouTubeアクセスをブロックしてみましょう。
UniFi OSの管理画面から、`Settings > Policy Engine`の一番左にあるアイコン`Traffic & Firewall Rules`を開き、`Create entry`からドメインレコードを追加します。

![alt text](image-9.png)<!-- image-9.png -->

あるいは、デバイス一覧からデバイスを選択して`Traffic Rules > Create Rule`でを、ここに飛びます。

![alt text](image-11.png)<!-- image-11.png -->

追加するドメインはコンテンツフィルターで紹介したものと同じです。`Action`でBlockや速度調整などが選べますが、今回はBlockを選択します。`Source`はネットワーク全体にするか特定デバイスにするか選べます、今回は`LoL`というPCを選択しています。

![alt text](image-5.png)<!-- image-5.png -->

他の止め方と違うのが、`Source`で端末を指定できること、`Scehdule`で時間帯を指定できることです。例えば1回だけ試しに止めたり、毎週やカスタム曜日+時間帯で止めたりといったことが可能です。

![alt text](image-7.png)<!-- image-7.png -->

![alt text](image.png)<!-- image.png -->

![alt text](image-12.png)<!-- image-12.png -->

これで、YouTubeへのアクセスがWeb/スマホともにブロックされます。

[画像]

## まとめ

今回は、YouTubeへのアクセスをUniFi OSでブロックする方法を3つ紹介しました。YouTubeに限らず、特定のサイトへのアクセスを制限したい場合に応用できるでしょう。

しかし、YouTubeの場合は、特定のチャンネルとかキーワードを止める需要の方が高い気もしなくはないです。その場合はUniFiだと難しい感じがしますがどうなんですかね?

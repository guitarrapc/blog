---
Title: GitHub Actionsのhosted runnerサイズを使い分ける
Category:
- GitHubActions
Date: 2026-01-02T15:00:00+09:00
EditURL: https://blog.hatena.ne.jp/guitarrapc_tech/guitarrapc-tech.hatenablog.com/atom/entry/17179246901339074074
PreviewURL: https://tech.guitarrapc.com/draft/entry/ioU1ffsik1Ap0uN7d5nnBHc9qbY
CustomPath: 2026/01/02/150000
Draft: true
---

今日から、[Hosted Runnerの値下げ](https://github.blog/changelog/2026-01-01-reduced-pricing-for-github-hosted-runners-usage/)が有効になりました。
いい機会なので、GitHub Actionsのhosted runner(Ubuntuランナー)における、`ubuntu-24.04`と`ubuntu-slim`の使い分けについて振り返っておきましょう。

[:contents]

## 対象

本記事の対象は、Private RepositoryでGitHub Actionsを利用している方です。
Public Repositoryではランナーが使えるため、強い動機づけがありません。とはいえ、無駄にCPU使うならslimでいい説[^1]もあります。

## `ubuntu-slim`

[スペック](https://docs.github.com/en/actions/reference/runners/github-hosted-runners)をおさらいしておきましょう。

簡単にまとめると、次の特徴があります。

- VMではなくコンテナで起動
- 1CPUコア、5GBメモリ
- 15分上限の実行時間
- 最小限のツールセットだけプリインストール

CPUが少なく、メモリも少ないのでCPUを複数使うビルド処理などには向いていません。また、VMではなくコンテナで起動しており、最大15分までしか実行できません。

- `ubuntu-slim`ランナー: CPU1コア、メモリ5GBなx64コンテナ
- `ubuntu-24.04`ランナー: CPU2コア、メモリ7GBなx64マシン[^2]
- `ubuntu-24.04-4core`: CPU4コア、メモリ16GBなx64マシン。Larger Runnersオプションで利用可能

2026/1/2から、コストは次の通りです。`ubuntu-slim`は安くなっていないのですが、以前として2CPUランナーの1/3な価格です。

- `ubuntu-slim`:	$0.002/min (2025年: $0.002/min)
- `ubuntu-24.04`:	$0.006/min (2025年: $0.008/min)
- `ubuntu-24.04-4core`: $$0.012/min (2025年: $0.016/min)

切り替え方も簡単です。これまで、`ubuntu-24.04`や`ubuntu-latest`を指定していたところを、`ubuntu-slim`に変えるだけです。LLMに適当にお願いすればいいでしょう。

```yaml
jobs:
  lint:
    runs-on: ubuntu-slim # ここを変更
    timeout-minutes: 15 # slimは最長15分まで
    steps:
      - ...
```

## `ubuntu-slim`が向いているケース

`ubuntu-slim`には、最小限のツールセットがインストールされています。インストールされている一覧は、[actions/runner-imagesのREADME](https://github.com/actions/runner-images/blob/main/images/ubuntu-slim/ubuntu-slim-Readme.md)で公開されているので確認してください。npmやpipは入っていますが、cmake/clangやdockerは入っていません。

このため、`ubuntu-slim`は次のようなケースに向いています。

- IssueやPRの自動ラベル
- lint/format
- 軽量なビルド
- ghコマンドをサクッと実行
- actions-timelineのような軽量処理
- 疎通確認のような待機するだけの処理

**自動ラベル**

[actions/labeler](https://github.com/actions/labeler)を使うと、任意のパスにおける変更に応じて自動的でPRラベル付与できます。

```yaml
name: "Pull Request Labeler"
on:
  pull_request:
    branches:
      - main

jobs:
  labeler:
    permissions:
      contents: read
      pull-requests: write
    runs-on: ubuntu-slim
    steps:
    - uses: actions/labeler@v6
```

**lint**

lint系も、`ubuntu-slim`で十分です。例えば、[github/super-linter](https://github.com/super-linter/super-linter)でもいいですし、npmやtextlintなどもいいでしょう。

```yaml
name: Lint

on:
  pull_request:
    branches:
      - main

permissions: {}

jobs:
  lint:
    permissions:
      contents: read
      packages: read
      # To report GitHub Actions status checks
      statuses: write
    runs-on: ubuntu-slim
    timeout-minutes: 5
    steps:
      - name: Checkout code
        uses: actions/checkout@v5
        with:
          # super-linter needs the full git history to get the
          # list of files that changed across commits
          fetch-depth: 0
          persist-credentials: false
      - name: Super-linter
        uses: super-linter/super-linter@v8.3.2
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

**ghコマンド**

ghコマンドをActionsで利用する機会は多く、軽量な処理が多いので`ubuntu-slim`で十分です。意外とあるんじゃないですか?

```yaml
jobs:
  create-pr:
    permissions:
      contents: read
      pull-requests: write
    runs-on: ubuntu-slim
    timeout-minutes: 5
    steps:
      - uses: actions/checkout@v6
      - name: Create Pull Request
        run: |
          gh pr create --title "My PR" --body "This is my pull request." --base main --head feature-branch
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

**actions-timeline**

[actions-timeline](https://github.com/Kesin11/actions-timeline)は、ワークフローにおける実行履歴をタイムライン風にして`STEP_SUMMARY`へ出力するアクションです。ジョブごとに仕込むのではなく、最後にまとめて実行する場合`ubuntu-slim`で十分です。

```yaml
jobs:
  build-1:
  build-2:
  build-3:

  actions-timeline:
    needs: [build-1, build-2, build-3]
    runs-on: ubuntu-slim
    steps:
      - uses: Kesin11/actions-timeline@v2
```

**ポーリングする処理**

例えば、デプロイ時にDNSが解決できるようになったか確認したり、curlでエンドポイントを確認することがあります。こういった処理は待機が長く軽量なので`ubuntu-slim`で十分です。待機してるだけでお金かかるの、地味に嫌ですからね。

```yaml
jobs:
  post-deploy:
    runs-on: ubuntu-slim
    timeout-minutes: 10
    steps:
      - name: Wait for DNS
        run: |
          for i in {1..10}; do
            if nslookup myservice.example.com; then
              echo "DNS resolved!"
              exit 0
            else
              echo "Waiting for DNS..."
              sleep 10
            fi
          done
          echo "DNS did not resolve in time."
          exit 1
      - name: Check Endpoint
        run: |
          for i in {1..10}; do
            if curl -sSf https://myservice.example.com/health; then
              echo "Endpoint is healthy!"
              exit 0
            else
              echo "Waiting for endpoint..."
              sleep 10
            fi
          done
          echo "Endpoint did not become healthy in time."
          exit 1
```

## 向いていない処理

`ubuntu-slim`の特性から逆算すると、以下は向いていない処理です。

- CPU複数コアを使うビルド
- Dockerを使っている処理は移行できない
- ランナープリインストールを前提として追加インストールしたくない処理

例えば、dotnetビルドやgoビルドはCPU複数コアを使うので軽量なプロジェクトじゃないなら向いていないでしょう。`docker build`などコンテナイメージを作成して、レジストリにプッシュする処理も向いていません。

Unityビルドも全然無理です。かなしい。

## まとめ

プロジェクトにもよりますが、案外多くのジョブは軽量な処理をしていることが多いです。そういったジョブは`ubuntu-slim`に切り替えることで、コスト削減につながります。一個一個のコストは小さいですが、1年単位でみるとチリつもなのでやってもいいんじゃないですかね。

幸い、`runs-on`を変えるだけで切り替えられるので、試しに切り替えてみてはいかがでしょうか。

## 参考

- [Reduced pricing for GitHub-hosted runners usage - GitHub Changelog](https://github.blog/changelog/2026-01-01-reduced-pricing-for-github-hosted-runners-usage/)
- [GitHub-hosted runners reference - GitHub Docs](https://docs.github.com/en/actions/reference/runners/github-hosted-runners)

他の事例

- [ubuntu-latest から ubuntu-slim へ移行しよう！コスト削減うれしい～！ - Speaker Deck](https://speakerdeck.com/asumikam/from-ubuntu-latest-to-ubuntu-slim)
- [GitHub Actions の新ランナー ubuntu-slim でコスト削減する](https://zenn.dev/my_vision/articles/actions-ubuntu-slim)



[^1]: そういうことを気にしだすなら、LLMに適当に聞いてGPUうんぬんの非対称性は、という気もしますが気にしてはいけません。
[^2]: パブリックリポジトリでは、CPU4コア、メモリ14GBなx64マシンになります。

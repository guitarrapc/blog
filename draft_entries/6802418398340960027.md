---
Title: Domain UserでRemote Desktop Connectionをする時にConnection was denied, not authorized
Category:
- Windows
Date: 2013-08-19T22:08:19+09:00
EditURL: https://blog.hatena.ne.jp/guitarrapc_tech/guitarrapc-tech.hatenablog.com/atom/entry/6802418398340960027
PreviewURL: https://tech.guitarrapc.com/draft/entry/uie879wf16REkigc4Jxgf0MCBWc
CustomPath: 2013/08/19/220819
---

<!--
Date: 2013-08-19T22:08:19+09:00
URL: https://tech.guitarrapc.com/entry/2013/08/19/220819
-->

Remote Desktop は、 Windows では実質的なスタンダード的な位置を占めています。 OS標準で、バージョンが上がるごとに性能が良くなっています。 さて、今回は Domain 環境化において Remote Desktop 接続をできるようにする場合の注意点です。 特に以下のエラーが出た場合、設定が足りてないことを示していますが、何が足りないか分かりにくいです。 そこで、設定箇所を確認しましょう。
Connection was denied, not authorized for remote login.
対象バージョンは、 Windows Server 2012です。 2008 R2 もほぼ同じでしょうが、検証してませんしすることもありません。
## Workgroup 環境における Remote Desktop接続の許可
これは簡単で、以下の2点を有効にします。

- 接続される側(サーバー) で、接続する側 (クライント) が認証に使うサーバーのユーザー に対して、 Remote Desktop Users のグループを割り当てます。
- Computer > Property > System > Advanced system settings > Remote > Allow remote connections to this computer を有効にする

例外的に、 Administrator ユーザーは、Remote Desktop Users グループがアサインされていなくとも、2が満たされていれば利用可能です。
## Domain環境における Remote Desktop接続の許可
少しだけ、手間が増えます。 正確には、細かく設定が可能になります。

- 接続される側(サーバー) で、接続する側 (クライント) が認証に使うDomainユーザー に対して、 Remote Desktop Users のグループを割り当てます。
- Computer > Property > System > Advanced system settings > Remote > Allow remote connections to this computer を有効にする
- Computer > Property > System > Advanced system settings > Remote > Allow remote connections to this computer > Select Users > 接続許可する Domain ユーザーを割り当てる
- secpol で Local Security Policy > Local Policy > User Rights Assignment > Allow Log on through Remote Desktop Service >許可する Domain User か Domain Group を割り当てる

簡単、ですね！知ってしまえば。 知らないと意外と纏まった情報が無くて困ります。 参考になればどうぞ。

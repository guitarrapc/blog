---
Title: PowerShellで正規表現を使って余計な0を取り除く
Category:
- PowerShell
Date: 2013-04-09T20:04:23+09:00
EditURL: https://blog.hatena.ne.jp/guitarrapc_tech/guitarrapc-tech.hatenablog.com/atom/entry/6802418398340681541
PreviewURL: https://tech.guitarrapc.com/draft/entry/pkrfK7bKBnMwZFnw0ELdHpdARDc
CustomPath: 2013/04/09/200423
---

<!--
Date: 2013-04-09T20:04:23+09:00
URL: https://tech.guitarrapc.com/entry/2013/04/09/200423
-->

正規表現は偉大ですね。 likeよりmatchが好きなPowerShellerです。 さて、今更ですがIPv4は4オクテットに分けられた文字列ですね。 このIPアドレス、時に頭に0が付いた変なアドレスを渡されることが………稀に稀にごくまれにあります。 例えばこう。
0192.010.000.105
今回は、この頭の0を取り除いて
192.10.0.105
と、正規表現一発でやってみたいと思います。 ====
## ワンライナーで-replaceメソッドを利用する
パワーシェルには、Stringに対する.replace() (*like処理)と -replace (*match処理) があるのは度々紹介してきたとおりです。 今回は正規表現で処理するので -replaceを利用します。 では、答え。

```ps1
"0192.010.000.105" -replace '\b0+\B'
```

実行結果はこうです。

```ps1
192.10.0.105
```

## ちなみに
それぞれ何をしているかですね、分解してみましょう。
### \b
\bは、文字列の先頭 or 末尾にマッチします。 つまり、

```ps1
0123 -replace "\b0"
```

は、判定がかかります。

```ps1
123
```

が、

```ps1
1023 -replace "\b0"
```

は、判定がかかりません。

```ps1
1023
```

### 0+
は、簡単ですね。+は、直前にある部分正規表現の一回以上の繰り返しにマッチします。 つまり0がある場合にマッチとなります。 よって、

```ps1
'0102' -replace '0+'
```

このように0がなくなります。

```ps1
12
```

が、\bと組み合わせることで、

```ps1
'0102' -replace '\b0+'```

頭の0のみに判定をかけるようになります。

```ps1
102```

### \B
これは、\bが文字の戦闘は末尾に対して、文字列の中にある文字列にマッチします つまりこうです。

```ps1
'0102' -replace '0+\B'```

は、

```ps1
12```

あるいは

```ps1
'0102' -replace '0\B'```

も当然、

```ps1
12```

そして

```ps1
'0102' -replace '\B0+'```

は、

```ps1
012```

となります。
## まとめ

```ps1
正規表現は奥が深い。```
